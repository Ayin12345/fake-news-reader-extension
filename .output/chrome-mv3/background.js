var background=function(){"use strict";var u,f;function h(r){return r==null||typeof r=="function"?{main:r}:r}async function d(r,n){var o;const e=await(await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"user",content:r}]})})).json();if(e.choices&&e.choices[0]&&e.choices[0].message.content)return e.choices[0].message.content;throw new Error(((o=e.error)==null?void 0:o.message)||"No response from OpenAI")}async function p(r,n){var o;const t=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${n}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:r}]}],generationConfig:{temperature:.7,maxOutputTokens:1e3}})});if(!t.ok){const s=await t.text();throw new Error(`Gemini API error: ${t.status} ${t.statusText} - ${s}`)}const e=await t.json();if(e.candidates&&e.candidates[0]&&e.candidates[0].content&&e.candidates[0].content.parts&&e.candidates[0].content.parts[0])return e.candidates[0].content.parts[0].text;throw new Error(((o=e.error)==null?void 0:o.message)||"No response from Gemini")}async function m(r,n){var o;const t=await fetch("https://api-inference.huggingface.co/models/meta-llama/Llama-3.3-70B-Instruct",{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({inputs:r,parameters:{max_new_tokens:500,temperature:.7,return_full_text:!1}})});if(!t.ok){const s=await t.text();throw new Error(`Llama API error: ${t.status} ${t.statusText} - ${s}`)}const e=await t.json();if(Array.isArray(e)&&((o=e[0])!=null&&o.generated_text))return e[0].generated_text;throw new Error(e.error||"No valid response from Llama")}async function g(r,n){const t=await fetch("https://api.cohere.ai/v1/generate",{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({model:"command",prompt:r,max_tokens:1250})});if(!t.ok)throw new Error(`Cohere API error: ${t.status} ${t.statusText}`);const e=await t.json();if(e.generations&&e.generations[0]&&e.generations[0].text)return e.generations[0].text;throw new Error(e.message||"No response from Cohere")}async function w(r,n){var o;const t=await fetch("https://api-inference.huggingface.co/models/mistralai/Mistral-7B-Instruct-v0.3",{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({inputs:r,parameters:{max_new_tokens:500,temperature:.7,return_full_text:!1}})});if(!t.ok){const s=await t.text();throw new Error(`Mistral API error: ${t.status} ${t.statusText} - ${s}`)}const e=await t.json();if(Array.isArray(e)&&((o=e[0])!=null&&o.generated_text))return e[0].generated_text;throw new Error(e.error||"No valid response from Mistral 7B")}async function y(r,n){const t=await fetch("https://api-inference.huggingface.co/models/mistralai/Mixtral-8x7B-Instruct-v0.1",{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({inputs:r,parameters:{max_new_tokens:500,temperature:.7,return_full_text:!1}})});if(!t.ok){const o=await t.text();throw new Error(`Mixtral API error: ${t.status} ${t.statusText} - ${o}`)}const e=await t.json();if(Array.isArray(e)&&e[0]&&e[0].generated_text)return e[0].generated_text;throw new Error(e.error||"No response from Mixtral 8x7B")}const x=h({main(){chrome.runtime.onInstalled.addListener(()=>{console.log("Extension installed")}),chrome.runtime.onMessage.addListener((r,n,t)=>(r.type==="GET_PAGE_INFO"&&(async()=>{try{const[e]=await chrome.tabs.query({active:!0,currentWindow:!0}),o=await chrome.tabs.sendMessage(e.id,{type:"GET_PAGE_CONTENT"});if(o&&o.error){t({success:!1,error:o.error});return}else t({success:!0,data:o}),chrome.storage.local.set({pageInfo:o})}catch(e){console.error("Error fetching page info:",e),t({success:!1,error:"Failed to fetch page info"})}})(),!0)),chrome.runtime.onMessage.addListener((r,n,t)=>{if(r.type==="ANALYZE_ARTICLE"){const{content:e,providers:o}=r,s=[];for(const a of o)a==="Openai"?s.push(d(e,"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")):a==="Gemini"?s.push(p(e,"AIzaSyA82I5_GdxU23af9sklb3mLb8T-tuPP1BE").then(i=>(console.log("ðŸ”® Gemini response:",i),i))):a==="Cohere"?s.push(g(e,"d4rtWmY3HK9su8mrSbxlsrWEJod7TZyGeNH3ZvdG").then(i=>(console.log("ðŸ§  Cohere response:",i),i))):a==="Mistral"?s.push(w(e,"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")):a==="Mixtral"?s.push(y(e,"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")):a==="Llama"&&s.push(m(e,"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").then(i=>(console.log("ðŸ¦™ Llama response:",i),i)));return Promise.allSettled(s).then(a=>{t({success:!0,data:a,providers:o})}).catch(a=>{console.error("Analysis failed:",a),t({success:!1,error:"Analysis failed"})}),!0}})}});function A(){}(f=(u=globalThis.browser)==null?void 0:u.runtime)!=null&&f.id?globalThis.browser:globalThis.chrome;function c(r,...n){}const T={debug:(...r)=>c(console.debug,...r),log:(...r)=>c(console.log,...r),warn:(...r)=>c(console.warn,...r),error:(...r)=>c(console.error,...r)};let l;try{l=x.main(),l instanceof Promise&&console.warn("The background's main() function return a promise, but it must be synchronous")}catch(r){throw T.error("The background crashed on startup!"),r}return l}();
background;
